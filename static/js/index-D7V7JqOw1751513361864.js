import{a8 as t,a9 as e,aa as a,E as i,ab as n,ac as l,ad as s,ae as o,af as r,ag as c,S as d,L as u,ah as p}from"./chunk-element-plus-nGWwAefB1751513361864.js";import{bu as m,bz as h,bF as v,bT as g,bU as x,c1 as y,cc as f,bw as _,c7 as b,c5 as k,bX as w,cd as T,c2 as L,cB as C,c4 as I,cs as S,c9 as j,c3 as M,cv as P,cG as q,c6 as A,bv as E,da as B,ce as H,bG as O,cg as R,b_ as G,cL as V}from"./chunk-vendor-C4HKfta71751513361864.js";import{u as W,a as z}from"./global.store-6HPalSGw1751513361864.js";import{b as D,u as F}from"./chunk-vue-router-DlU29Ka71751513361864.js";import{_ as U,c as X,d as J,E as K}from"./index-OWeuetou1751513361864.js";import"./chunk-nprogress-DVqohuhc1751513361864.js";import"./chunk-pinia-Ds0_iFQX1751513361864.js";import"./chunk-axios-rSMZb3Ae1751513361864.js";const N={class:"tag_container"},Q={key:0,class:"tag-loading"},Y={style:{display:"flex","align-items":"center"}},Z={class:"tag_content"},$=U({__name:"TagBar",setup(i){const n=D(),l=F(),s=W(),o=z(),r=s.tabs,c=m(""),d=m(""),u=m(0),p=t=>{t.path!==c.value&&l.push(t.path)};return h((()=>r.length),((t,e)=>{if(t>e){u.value=t;const e=r[t-1];e&&(d.value=e.path,setTimeout((()=>{d.value=""}),2e3))}})),h((()=>n.path),(t=>{t!==c.value&&(c.value=t)}),{immediate:!0}),h((()=>o.isPageLoading),((t,e)=>{!t&&e&&(u.value=r.length)})),v((()=>{c.value=n.path,u.value=r.length})),(i,n)=>{const l=t,u=e,m=a;return x(),g("div",N,[_(o).isPageLoading?(x(),g("div",Q,[b(u,{count:1,animated:""},{template:k((()=>[w("div",Y,[b(l,{variant:"button",style:{width:"70px",height:"28px","margin-right":"12px","border-radius":"4px"}}),b(l,{variant:"button",style:{width:"70px",height:"28px","margin-right":"12px","border-radius":"4px"}}),b(l,{variant:"button",style:{width:"70px",height:"28px","margin-right":"12px","border-radius":"4px"}}),b(l,{variant:"button",style:{width:"70px",height:"28px","margin-right":"12px","border-radius":"4px"}})])])),_:1})])):y("",!0),f(w("div",Z,[(x(!0),g(L,null,C(_(r),((t,e)=>{return x(),I(m,{key:t.path,onClick:e=>p(t),onClose:a=>((t,e)=>{const a=document.querySelectorAll(".tag-style");if(a[e])a[e].classList.add("tag-leave"),setTimeout((()=>{if(s.removeTab(t.path),t.path===c.value){const t=P(r),e=t[t.length-1];p(e)}}),300);else if(s.removeTab(t.path),t.path===c.value){const t=P(r),e=t[t.length-1];p(e)}})(t,e),"disable-transitions":"",class:M(["tag-style",{"is-active":t.path===c.value,"tag-enter":(a=t.path,a===d.value)}]),type:"primary",closable:"/index"!==t.path},{default:k((()=>[S(j(t.meta.title),1)])),_:2},1032,["onClick","onClose","class","closable"]);var a})),128))],512),[[T,!_(o).isPageLoading]])])}}},[["__scopeId","data-v-d9cdbea1"]]),tt=U(Object.assign({name:"MenuItem"},{__name:"MenuItem",props:{item:{type:Object,required:!0}},setup:t=>(e,a)=>{var s,o;const r=i,c=q("MenuItem",!0),d=n,u=l;return(null==(s=t.item.children)?void 0:s.length)&&!(null==(o=t.item.meta)?void 0:o.isChildrenHide)?(x(),I(d,{key:0,index:t.item.path},{title:k((()=>{var e;return[(null==(e=t.item.meta)?void 0:e.icon)?(x(),I(r,{key:0},{default:k((()=>[(x(),I(A(t.item.meta.icon)))])),_:1})):y("",!0),w("span",null,j(t.item.meta.title),1)]})),default:k((()=>[(x(!0),g(L,null,C(t.item.children,(t=>(x(),I(c,{key:t.path,item:t},null,8,["item"])))),128))])),_:1},8,["index"])):(x(),I(u,{key:1,index:t.item.path},{title:k((()=>[S(j(t.item.meta.title),1)])),default:k((()=>{var e;return[(null==(e=t.item.meta)?void 0:e.icon)?(x(),I(r,{key:0},{default:k((()=>[(x(),I(A(t.item.meta.icon)))])),_:1})):y("",!0)]})),_:1},8,["index"]))}}),[["__scopeId","data-v-95e6de57"]]),et={class:"sidebar_content custom-scrollbar"},at={key:0,class:"sidebar-loading"},it=U({__name:"SideBar",setup(t){const a=D(),i=X(),n=z();function l(t,e){if(!Array.isArray(t))return null;let a=null;for(const i of t)if(!i.meta||!i.meta.isSideMenuHide)if(i.meta&&i.meta.isChildrenHide)e.startsWith(i.path)&&(!a||i.path.length>a.length)&&(a=i.path);else if(e.startsWith(i.path)&&(!a||i.path.length>a.length)&&(a=i.path),i.children&&i.children.length){const t=l(i.children,e);t&&(!a||t.length>a.length)&&(a=t)}return a}const o=E((()=>{if(a.meta&&a.meta.activeSideMenu)return a.meta.activeSideMenu;const t=i.sideRoute;return Array.isArray(t)&&0!==t.length&&l(t,a.path)||a.path}));return(t,a)=>{const l=e,r=s;return x(),g("div",et,[_(n).isPageLoading?(x(),g("div",at,[b(l,{rows:18,animated:""})])):(x(),I(r,{key:1,router:"","default-active":o.value,class:"side-bar__menu"},{default:k((()=>[(x(!0),g(L,null,C(_(i).sideRoute,(t=>(x(),I(tt,{key:t.path,item:t},null,8,["item"])))),128))])),_:1},8,["default-active"]))])}}},[["__scopeId","data-v-e037e31d"]]),nt={key:0,class:"main-loading"},lt={style:{padding:"20px"}},st=U({__name:"Main",setup(a){const i=D(),n=F(),l=J(),s=z(),r=m([]);h((()=>i.path),(t=>{var e,a,n,s;const o=null==(n=null==(a=null==(e=i.matched[i.matched.length-1])?void 0:e.components)?void 0:a.default)?void 0:n.name;o&&(null==(s=i.meta)?void 0:s.keepAlive)&&!r.value.includes(o)&&r.value.push(o),O((()=>{l.clearToc()}))}),{immediate:!0});const c=()=>{n.push({path:i.path,query:{_t:Date.now()}})};return(a,n)=>{const l=t,d=e,u=q("router-view"),p=o;return x(),g(L,null,[b(H,{name:"fade-transform",mode:"out-in"},{default:k((()=>[(x(),g("div",{class:"main_content custom-scrollbar",key:_(i).path},[_(s).isPageLoading?(x(),g("div",nt,[b(d,{style:{width:"100%","min-height":"90vh"},animated:""},{template:k((()=>[w("div",lt,[b(l,{variant:"h1",style:{width:"50%"}}),b(l,{variant:"h3",style:{width:"80%","margin-top":"30px"}}),b(l,{variant:"text",style:{"margin-top":"20px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}}),b(l,{variant:"h3",style:{width:"70%","margin-top":"30px"}}),b(l,{variant:"text",style:{"margin-top":"20px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}}),b(l,{variant:"text",style:{"margin-top":"12px"}})])])),_:1})])):y("",!0),f(b(K,{errorTitle:"管理页面加载错误",fallbackMessage:"当前管理页面加载过程中发生错误，请尝试刷新或选择其他菜单",onReset:c},{default:k((()=>[b(u,null,{default:k((({Component:t})=>[(x(),I(B,{include:r.value},[(x(),I(A(t),{key:_(i).path}))],1032,["include"]))])),_:1})])),_:1},512),[[T,!_(s).isPageLoading]])]))])),_:1}),b(p,{target:".main_content",right:60,bottom:50},{default:k((()=>n[0]||(n[0]=[w("div",{style:{height:"100%",width:"100%","background-color":"var(--el-bg-color-overlay)","box-shadow":"var(--el-box-shadow-lighter)","text-align":"center","line-height":"40px","border-radius":"50%",color:"var(--el-color-primary)"}}," TOP ",-1)]))),_:1,__:[0]})],64)}}},[["__scopeId","data-v-d1629b5f"]]),ot={class:"toc-fixed"},rt={class:"toc-header"},ct={class:"toc-content custom-scrollbar"},dt={class:"toc-skeleton",key:"loading"},ut={style:{padding:"10px 16px"}},pt={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},mt={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},ht={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},vt={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},gt={style:{display:"flex","align-items":"center"}},xt={class:"toc-empty",key:"empty"},yt={key:"toc-list"},ft=["onClick"],_t={class:"toc-index"},bt={class:"toc-title"},kt={class:"trigger-content"},wt=U({__name:"Toc",emits:["activated"],setup(a){const n=D(),l=J(),s=E((()=>l.tocList)),o=m(l.isVisible),y=m(""),S=m(n.path),P=E((()=>l.shouldShowToc));function q(){o.value=!o.value,l.setTocVisibility(o.value)}function A(){if(0===s.value.length)return;const t=document.querySelector(".main_content");if(!t)return;const e=t.scrollTop,a=s.value.map((t=>document.getElementById(t.id)));if(!a.every((t=>null!==t)))return void setTimeout(A,100);let i=-1;for(let n=0;n<a.length;n++){const l=a[n];if(!l)continue;if(!(l.offsetTop-t.offsetTop<=e+100))break;i=n}-1!==i?y.value=s.value[i].id:a.length>0&&a[0]&&(y.value=s.value[0].id)}function B(){W();const t=document.querySelector(".main_content");t&&(t.addEventListener("scroll",A),setTimeout(A,300))}function W(){const t=document.querySelector(".main_content");t&&t.removeEventListener("scroll",A)}return h((()=>s.value),(t=>{t.length>0&&O((()=>{y.value=t[0].id,setTimeout(A,300)}))}),{deep:!0}),h((()=>n.path),(t=>{t!==S.value&&(S.value=t,O((()=>{s.value.length>0&&(y.value=s.value[0].id,setTimeout(A,300))})))})),h((()=>n.fullPath),(()=>{O((()=>{W(),B()}))})),v((()=>{B(),s.value.length>0&&O((()=>{y.value=s.value[0].id,setTimeout(A,300)}))})),R((()=>{B(),setTimeout(A,300)})),G((()=>{W()})),(a,n)=>{const m=i,h=d,v=t,S=e;return x(),g(L,null,[f(w("div",{class:M(["toc-container",{collapsed:!o.value}])},[w("div",ot,[w("div",rt,[n[0]||(n[0]=w("span",null,"文档目录",-1)),b(h,{link:"",class:"collapse-btn",onClick:q},{default:k((()=>[b(m,null,{default:k((()=>[o.value?(x(),I(_(c),{key:1})):(x(),I(_(r),{key:0}))])),_:1})])),_:1})]),w("div",ct,[b(H,{name:"fade",mode:"out-in"},{default:k((()=>[_(l).isLoading?(x(),g("div",dt,[b(S,{animated:"",count:1},{template:k((()=>[w("div",ut,[w("div",pt,[b(v,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),b(v,{variant:"text",style:{width:"80%"}})]),w("div",mt,[b(v,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),b(v,{variant:"text",style:{width:"70%"}})]),w("div",ht,[b(v,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),b(v,{variant:"text",style:{width:"85%"}})]),w("div",vt,[b(v,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),b(v,{variant:"text",style:{width:"75%"}})]),w("div",gt,[b(v,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),b(v,{variant:"text",style:{width:"60%"}})])])])),_:1})])):0===s.value.length?(x(),g("div",xt,[b(m,{class:"empty-icon"},{default:k((()=>[b(_(u))])),_:1}),n[1]||(n[1]=w("p",null,"当前页面无目录",-1))])):(x(),g("ul",yt,[b(V,{name:"list",tag:"div",class:"toc-list-container"},{default:k((()=>[(x(!0),g(L,null,C(s.value,((t,e)=>(x(),g("li",{key:t.id,onClick:e=>function(t){const e=document.getElementById(t),a=document.querySelector(".main_content");if(e&&a){const i=e.offsetTop-a.offsetTop;a.scrollTo({top:i,behavior:"smooth"}),y.value=t}}(t.id),class:M({active:y.value===t.id})},[w("span",_t,j(e+1),1),w("span",bt,j(t.title),1)],10,ft)))),128))])),_:1})]))])),_:1})])])],2),[[T,P.value]]),f(w("div",{class:"toc-trigger",onClick:q},[w("div",kt,[b(m,{class:"trigger-icon"},{default:k((()=>[b(_(p))])),_:1}),n[2]||(n[2]=w("span",{class:"trigger-text"},"目录",-1))])],512),[[T,P.value&&!o.value]])],64)}}},[["__scopeId","data-v-ce8079d1"]]),Tt={class:"manage_content"},Lt={class:"manage_body"},Ct=U({__name:"index",setup(t){const e=D(),a=W(),i=z();return h((()=>e.path),((t,n)=>{t!==n&&(i.main_loading=!0,O((()=>{a.addTab({path:e.path,meta:e.meta})})))}),{immediate:!0}),(t,e)=>(x(),g("div",Tt,[b(it),w("div",Lt,[b($),b(st)]),b(wt)]))}},[["__scopeId","data-v-31cfcafa"]]);export{Ct as default};
