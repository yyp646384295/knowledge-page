import{a8 as e,E as t,a9 as a,aa as l,ab as n,ac as s,ad as i,ae as o,R as c,l as u,L as r,af as d}from"./chunk-element-plus-ChR_2eik1751371762842.js";import{bu as m,bz as v,bF as p,c4 as h,bU as f,c5 as _,bT as g,c2 as b,cO as y,bw as k,c3 as T,cs as x,c9 as C,cI as I,cv as j,cD as S,c1 as M,bX as w,c6 as q,bv as E,c7 as A,da as L,ce as B,bG as O,cg as R,b_ as H,cc as D,cd as P}from"./chunk-vendor-D9Yy_Kpl1751371762842.js";import{u as V}from"./tabs.store-DdhqAALb1751371762842.js";import{b as W,u as z}from"./chunk-vue-router-BOltZzxd1751371762842.js";import{_ as F,c as G,d as U,E as X}from"./index-DNN4NJo41751371762842.js";import{d as J}from"./chunk-pinia-DWlFcG8A1751371762842.js";import"./chunk-nprogress-DVqohuhc1751371762842.js";import"./chunk-axios-rSMZb3Ae1751371762842.js";const K=F({__name:"TagBar",setup(t){const a=W(),l=z(),n=V(),s=n.tabs,i=m(""),o=e=>{e.path!==i.value&&l.push(e.path)};return v((()=>a.path),(e=>{e!==i.value&&(i.value=e)}),{immediate:!0}),p((()=>{i.value=a.path})),(t,a)=>{const l=e;return f(),h(I,{class:"tag_content",name:"fade",tag:"div"},{default:_((()=>[(f(!0),g(b,null,y(k(s),(e=>(f(),h(l,{onClick:t=>o(e),onClose:t=>(e=>{if(n.removeTab(e.path),e.path===i.value){const e=j(s),t=e[e.length-1];o(t)}})(e),"disable-transitions":"",key:e.path,class:T(["tag-style",{"is-active":e.path===i.value}]),type:"primary",closable:"/index"!==e.path},{default:_((()=>[x(C(e.meta.title),1)])),_:2},1032,["onClick","onClose","class","closable"])))),128))])),_:1})}}},[["__scopeId","data-v-c8cd4494"]]),N=F(Object.assign({name:"MenuItem"},{__name:"MenuItem",props:{item:{type:Object,required:!0}},setup:e=>(n,s)=>{var i,o;const c=t,u=S("MenuItem",!0),r=a,d=l;return(null==(i=e.item.children)?void 0:i.length)&&!(null==(o=e.item.meta)?void 0:o.isChildrenHide)?(f(),h(r,{key:0,index:e.item.path},{title:_((()=>{var t;return[(null==(t=e.item.meta)?void 0:t.icon)?(f(),h(c,{key:0},{default:_((()=>[(f(),h(q(e.item.meta.icon)))])),_:1})):M("",!0),w("span",null,C(e.item.meta.title),1)]})),default:_((()=>[(f(!0),g(b,null,y(e.item.children,(e=>(f(),h(u,{key:e.path,item:e},null,8,["item"])))),128))])),_:1},8,["index"])):(f(),h(d,{key:1,index:e.item.path},{title:_((()=>[x(C(e.item.meta.title),1)])),default:_((()=>{var t;return[(null==(t=e.item.meta)?void 0:t.icon)?(f(),h(c,{key:0},{default:_((()=>[(f(),h(q(e.item.meta.icon)))])),_:1})):M("",!0)]})),_:1},8,["index"]))}}),[["__scopeId","data-v-95e6de57"]]),Q={class:"sidebar_content custom-scrollbar"},Y={__name:"SideBar",setup(e){const t=W(),a=G();function l(e,t){if(!Array.isArray(e))return null;let a=null;for(const n of e)if(!n.meta||!n.meta.isSideMenuHide)if(n.meta&&n.meta.isChildrenHide)t.startsWith(n.path)&&(!a||n.path.length>a.length)&&(a=n.path);else if(t.startsWith(n.path)&&(!a||n.path.length>a.length)&&(a=n.path),n.children&&n.children.length){const e=l(n.children,t);e&&(!a||e.length>a.length)&&(a=e)}return a}const s=E((()=>{if(t.meta&&t.meta.activeSideMenu)return t.meta.activeSideMenu;const e=a.sideRoute;return Array.isArray(e)&&0!==e.length&&l(e,t.path)||t.path}));return(e,t)=>{const l=n;return f(),g("div",Q,[A(l,{router:"","default-active":s.value,class:"side-bar__menu"},{default:_((()=>[(f(!0),g(b,null,y(k(a).sideRoute,(e=>(f(),h(N,{key:e.path,item:e},null,8,["item"])))),128))])),_:1},8,["default-active"])])}}},Z=F({__name:"Main",setup(e){const t=W(),a=z(),l=U(),n=m([]);v((()=>t.path),(e=>{var a,s,i,o;const c=null==(i=null==(s=null==(a=t.matched[t.matched.length-1])?void 0:a.components)?void 0:s.default)?void 0:i.name;c&&(null==(o=t.meta)?void 0:o.keepAlive)&&!n.value.includes(c)&&n.value.push(c),O((()=>{l.clearToc()}))}),{immediate:!0});const i=()=>{a.push({path:t.path,query:{_t:Date.now()}})};return(e,a)=>{const l=S("router-view"),o=s;return f(),g(b,null,[A(B,{name:"fade-transform",mode:"out-in"},{default:_((()=>[(f(),g("div",{class:"main_content custom-scrollbar",key:k(t).path},[A(X,{errorTitle:"管理页面加载错误",fallbackMessage:"当前管理页面加载过程中发生错误，请尝试刷新或选择其他菜单",onReset:i},{default:_((()=>[A(l,null,{default:_((({Component:e})=>[(f(),h(L,{include:n.value},[(f(),h(q(e),{key:k(t).path}))],1032,["include"]))])),_:1})])),_:1})]))])),_:1}),A(o,{target:".main_content",right:60,bottom:50},{default:_((()=>a[0]||(a[0]=[w("div",{style:{height:"100%",width:"100%","background-color":"var(--el-bg-color-overlay)","box-shadow":"var(--el-box-shadow-lighter)","text-align":"center","line-height":"40px","border-radius":"50%",color:"var(--el-color-primary)"}}," TOP ",-1)]))),_:1,__:[0]})],64)}}},[["__scopeId","data-v-e545f1d5"]]),$={class:"toc-fixed"},ee={class:"toc-header"},te={class:"toc-content custom-scrollbar"},ae={class:"toc-empty",key:"loading"},le={class:"toc-empty",key:"empty"},ne={key:"toc-list"},se=["onClick"],ie={class:"toc-index"},oe={class:"toc-title"},ce={class:"trigger-content"},ue=F({__name:"Toc",emits:["activated"],setup(e){const a=W(),l=U(),n=E((()=>l.tocList)),s=m(l.isVisible),x=m(""),j=m(a.path),S=E((()=>l.shouldShowToc));function M(){s.value=!s.value,l.setTocVisibility(s.value)}function q(){if(0===n.value.length)return;const e=document.querySelector(".main_content");if(!e)return;const t=e.scrollTop,a=n.value.map((e=>document.getElementById(e.id)));if(!a.every((e=>null!==e)))return void setTimeout(q,100);let l=-1;for(let n=0;n<a.length;n++){const s=a[n];if(!s)continue;if(!(s.offsetTop-e.offsetTop<=t+100))break;l=n}-1!==l?x.value=n.value[l].id:a.length>0&&a[0]&&(x.value=n.value[0].id)}function L(){V();const e=document.querySelector(".main_content");e&&(e.addEventListener("scroll",q),setTimeout(q,300))}function V(){const e=document.querySelector(".main_content");e&&e.removeEventListener("scroll",q)}return v((()=>n.value),(e=>{e.length>0&&O((()=>{x.value=e[0].id,setTimeout(q,300)}))}),{deep:!0}),v((()=>a.path),(e=>{e!==j.value&&(j.value=e,O((()=>{n.value.length>0&&(x.value=n.value[0].id,setTimeout(q,300))})))})),v((()=>a.fullPath),(()=>{O((()=>{V(),L()}))})),p((()=>{L(),n.value.length>0&&O((()=>{x.value=n.value[0].id,setTimeout(q,300)}))})),R((()=>{L(),setTimeout(q,300)})),H((()=>{V()})),(e,a)=>{const m=t,v=c;return f(),g(b,null,[D(w("div",{class:T(["toc-container",{collapsed:!s.value}])},[w("div",$,[w("div",ee,[a[0]||(a[0]=w("span",null,"文档目录",-1)),A(v,{link:"",class:"collapse-btn",onClick:M},{default:_((()=>[A(m,null,{default:_((()=>[s.value?(f(),h(k(o),{key:1})):(f(),h(k(i),{key:0}))])),_:1})])),_:1})]),w("div",te,[A(B,{name:"fade",mode:"out-in"},{default:_((()=>[k(l).isLoading?(f(),g("div",ae,[A(m,{class:"loading-icon"},{default:_((()=>[A(k(u))])),_:1}),a[1]||(a[1]=w("p",null,"加载中...",-1))])):0===n.value.length?(f(),g("div",le,[A(m,{class:"empty-icon"},{default:_((()=>[A(k(r))])),_:1}),a[2]||(a[2]=w("p",null,"当前页面无目录",-1))])):(f(),g("ul",ne,[A(I,{name:"list",tag:"div",class:"toc-list-container"},{default:_((()=>[(f(!0),g(b,null,y(n.value,((e,t)=>(f(),g("li",{key:e.id,onClick:t=>function(e){const t=document.getElementById(e),a=document.querySelector(".main_content");if(t&&a){const l=t.offsetTop-a.offsetTop;a.scrollTo({top:l,behavior:"smooth"}),x.value=e}}(e.id),class:T({active:x.value===e.id})},[w("span",ie,C(t+1),1),w("span",oe,C(e.title),1)],10,se)))),128))])),_:1})]))])),_:1})])])],2),[[P,S.value]]),D(w("div",{class:"toc-trigger",onClick:M},[w("div",ce,[A(m,{class:"trigger-icon"},{default:_((()=>[A(k(d))])),_:1}),a[3]||(a[3]=w("span",{class:"trigger-text"},"目录",-1))])],512),[[P,S.value&&!s.value]])],64)}}},[["__scopeId","data-v-fbd6f5a8"]]),re=J("global",(()=>({main_loading:m(!1)}))),de={class:"manage_content"},me={class:"manage_body"},ve=F({__name:"index",setup(e){const t=W(),a=V(),l=re();return v((()=>t.path),((e,n)=>{e!==n&&(l.main_loading=!0,O((()=>{a.addTab({path:t.path,meta:t.meta})})))}),{immediate:!0}),(e,t)=>(f(),g("div",de,[A(Y),w("div",me,[A(K),A(Z)]),A(ue)]))}},[["__scopeId","data-v-31cfcafa"]]);export{ve as default};
