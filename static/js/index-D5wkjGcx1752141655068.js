import{a8 as t,a9 as e,aa as a,E as i,ab as n,ac as l,ad as s,ae as o,af as c,ag as r,S as d,L as u,ah as m}from"./chunk-element-plus-D3hHamFS1752141655068.js";import{u as p,a as v}from"./global.store-DPr6Onwd1752141655068.js";import{b as h,u as g}from"./chunk-vue-router-CukzgLuN1752141655068.js";import{_ as y,c as f,d as x,E as _}from"./index-D3mIqR3u1752141655068.js";import{bu as b,bz as k,bF as T,bT as w,bU as C,bw as I,c7 as L,c5 as S,bX as j,c2 as M,cB as q,c4 as A,cs as E,c9 as B,c3 as P,cv as H,cG as R,c1 as G,c6 as O,bv as V,da as W,ce as z,bG as D,cg as F,b_ as U,cc as X,cd as J,cL as K}from"./chunk-vendor-LdhKlxOC1752141655068.js";import"./chunk-pinia-EHKNYQ4F1752141655068.js";import"./chunk-nprogress-DVqohuhc1752141655068.js";import"./chunk-axios-rSMZb3Ae1752141655068.js";const N={class:"tag_container"},Q={key:0,class:"tag-loading"},Y={style:{display:"flex","align-items":"center"}},Z={key:1,class:"tag_content"},$=y({__name:"TagBar",setup(i){const n=h(),l=g(),s=p(),o=v(),c=s.tabs,r=b(""),d=b(""),u=b(0),m=t=>{t.path!==r.value&&l.push(t.path)};return k((()=>c.length),((t,e)=>{if(t>e){u.value=t;const e=c[t-1];e&&(d.value=e.path,setTimeout((()=>{d.value=""}),2e3))}})),k((()=>n.path),(t=>{t!==r.value&&(r.value=t)}),{immediate:!0}),k((()=>o.isPageLoading),((t,e)=>{!t&&e&&(u.value=c.length)})),T((()=>{r.value=n.path,u.value=c.length})),(i,n)=>{const l=t,u=e,p=a;return C(),w("div",N,[I(o).isPageLoading?(C(),w("div",Q,[L(u,{count:1,animated:""},{template:S((()=>[j("div",Y,[L(l,{variant:"button",class:"skeleton-item"}),L(l,{variant:"button",class:"skeleton-item"}),L(l,{variant:"button",class:"skeleton-item"}),L(l,{variant:"button",class:"skeleton-item"})])])),_:1})])):(C(),w("div",Z,[(C(!0),w(M,null,q(I(c),((t,e)=>{return C(),A(p,{key:t.path,onClick:e=>m(t),onClose:a=>((t,e)=>{const a=document.querySelectorAll(".tag-style");if(a[e])a[e].classList.add("tag-leave"),setTimeout((()=>{if(s.removeTab(t.path),t.path===r.value){const t=H(c),e=t[t.length-1];m(e)}}),300);else if(s.removeTab(t.path),t.path===r.value){const t=H(c),e=t[t.length-1];m(e)}})(t,e),"disable-transitions":"",class:P(["tag-style",{"is-active":t.path===r.value,"tag-enter":(a=t.path,a===d.value)}]),type:"primary",closable:"/index"!==t.path},{default:S((()=>[E(B(t.meta.title),1)])),_:2},1032,["onClick","onClose","class","closable"]);var a})),128))]))])}}},[["__scopeId","data-v-d7e46c19"]]),tt=y(Object.assign({name:"MenuItem"},{__name:"MenuItem",props:{item:{type:Object,required:!0}},setup:t=>(e,a)=>{var s,o;const c=i,r=R("MenuItem",!0),d=n,u=l;return(null==(s=t.item.children)?void 0:s.length)&&!(null==(o=t.item.meta)?void 0:o.isChildrenHide)?(C(),A(d,{key:0,index:t.item.path},{title:S((()=>{var e;return[(null==(e=t.item.meta)?void 0:e.icon)?(C(),A(c,{key:0},{default:S((()=>[(C(),A(O(t.item.meta.icon)))])),_:1})):G("",!0),j("span",null,B(t.item.meta.title),1)]})),default:S((()=>[(C(!0),w(M,null,q(t.item.children,(t=>(C(),A(r,{key:t.path,item:t},null,8,["item"])))),128))])),_:1},8,["index"])):(C(),A(u,{key:1,index:t.item.path},{title:S((()=>[E(B(t.item.meta.title),1)])),default:S((()=>{var e;return[(null==(e=t.item.meta)?void 0:e.icon)?(C(),A(c,{key:0},{default:S((()=>[(C(),A(O(t.item.meta.icon)))])),_:1})):G("",!0)]})),_:1},8,["index"]))}}),[["__scopeId","data-v-95e6de57"]]),et={class:"sidebar_content custom-scrollbar"},at={key:0,class:"sidebar-loading"},it=y({__name:"SideBar",setup(t){const a=h(),i=f(),n=v();function l(t,e){if(!Array.isArray(t))return null;let a=null;for(const i of t)if(!i.meta||!i.meta.isSideMenuHide)if(i.meta&&i.meta.isChildrenHide)e.startsWith(i.path)&&(!a||i.path.length>a.length)&&(a=i.path);else if(e.startsWith(i.path)&&(!a||i.path.length>a.length)&&(a=i.path),i.children&&i.children.length){const t=l(i.children,e);t&&(!a||t.length>a.length)&&(a=t)}return a}const o=V((()=>{if(a.meta&&a.meta.activeSideMenu)return a.meta.activeSideMenu;const t=i.sideRoute;return Array.isArray(t)&&0!==t.length&&l(t,a.path)||a.path}));return(t,a)=>{const l=e,c=s;return C(),w("div",et,[I(n).isPageLoading?(C(),w("div",at,[L(l,{rows:18,animated:""})])):(C(),A(c,{key:1,router:"","default-active":o.value,class:"side-bar__menu"},{default:S((()=>[(C(!0),w(M,null,q(I(i).sideRoute,(t=>(C(),A(tt,{key:t.path,item:t},null,8,["item"])))),128))])),_:1},8,["default-active"]))])}}},[["__scopeId","data-v-e037e31d"]]),nt={key:0,class:"main-loading"},lt={style:{padding:"20px"}},st={key:1},ot=y({__name:"Main",setup(a){const i=h(),n=g(),l=x(),s=v(),c=b([]);k((()=>i.path),(t=>{var e,a,n,s;const o=null==(n=null==(a=null==(e=i.matched[i.matched.length-1])?void 0:e.components)?void 0:a.default)?void 0:n.name;o&&(null==(s=i.meta)?void 0:s.keepAlive)&&!c.value.includes(o)&&c.value.push(o),D((()=>{l.clearToc()}))}),{immediate:!0});const r=()=>{n.push({path:i.path,query:{_t:Date.now()}})};return(a,n)=>{const l=t,d=e,u=R("router-view"),m=o;return C(),w(M,null,[L(z,{name:"fade-transform",mode:"out-in"},{default:S((()=>[(C(),w("div",{class:"main_content custom-scrollbar",key:I(i).path},[I(s).isPageLoading?(C(),w("div",nt,[L(d,{style:{width:"100%","min-height":"90vh"},animated:""},{template:S((()=>[j("div",lt,[L(l,{variant:"h1",style:{width:"50%"}}),L(l,{variant:"h3",style:{width:"80%","margin-top":"30px"}}),L(l,{variant:"text",style:{"margin-top":"20px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}}),L(l,{variant:"h3",style:{width:"70%","margin-top":"30px"}}),L(l,{variant:"text",style:{"margin-top":"20px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}}),L(l,{variant:"text",style:{"margin-top":"12px"}})])])),_:1})])):(C(),w("div",st,[L(_,{errorTitle:"管理页面加载错误",fallbackMessage:"当前管理页面加载过程中发生错误，请尝试刷新或选择其他菜单",onReset:r},{default:S((()=>[L(u,null,{default:S((({Component:t})=>[(C(),A(W,{include:c.value},[(C(),A(O(t),{key:I(i).path}))],1032,["include"]))])),_:1})])),_:1})]))]))])),_:1}),L(m,{target:".main_content",right:60,bottom:50})],64)}}},[["__scopeId","data-v-c3a090b2"]]),ct={class:"toc-fixed"},rt={class:"toc-header"},dt={class:"toc-content custom-scrollbar"},ut={class:"toc-skeleton",key:"loading"},mt={style:{padding:"10px 16px"}},pt={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},vt={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},ht={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},gt={style:{display:"flex","align-items":"center","margin-bottom":"16px"}},yt={style:{display:"flex","align-items":"center"}},ft={class:"toc-empty",key:"empty"},xt={key:"toc-list"},_t=["onClick"],bt={class:"toc-index"},kt={class:"toc-title"},Tt={class:"trigger-content"},wt=y({__name:"Toc",emits:["activated"],setup(a){const n=h(),l=x(),s=V((()=>l.tocList)),o=b(l.isVisible),p=b(""),v=b(n.path),g=V((()=>l.shouldShowToc));function y(){o.value=!o.value,l.setTocVisibility(o.value)}function f(){if(0===s.value.length)return;const t=document.querySelector(".main_content");if(!t)return;const e=t.scrollTop,a=s.value.map((t=>document.getElementById(t.id)));if(!a.every((t=>null!==t)))return void setTimeout(f,100);let i=-1;for(let n=0;n<a.length;n++){const l=a[n];if(!l)continue;if(!(l.offsetTop-t.offsetTop<=e+100))break;i=n}-1!==i?p.value=s.value[i].id:a.length>0&&a[0]&&(p.value=s.value[0].id)}function _(){E();const t=document.querySelector(".main_content");t&&(t.addEventListener("scroll",f),setTimeout(f,300))}function E(){const t=document.querySelector(".main_content");t&&t.removeEventListener("scroll",f)}return k((()=>s.value),(t=>{t.length>0&&D((()=>{p.value=t[0].id,setTimeout(f,300)}))}),{deep:!0}),k((()=>n.path),(t=>{t!==v.value&&(v.value=t,D((()=>{s.value.length>0&&(p.value=s.value[0].id,setTimeout(f,300))})))})),k((()=>n.fullPath),(()=>{D((()=>{E(),_()}))})),T((()=>{_(),s.value.length>0&&D((()=>{p.value=s.value[0].id,setTimeout(f,300)}))})),F((()=>{_(),setTimeout(f,300)})),U((()=>{E()})),(a,n)=>{const v=i,h=d,f=t,x=e;return C(),w(M,null,[X(j("div",{class:P(["toc-container",{collapsed:!o.value}])},[j("div",ct,[j("div",rt,[n[0]||(n[0]=j("span",null,"文档目录",-1)),L(h,{link:"",class:"collapse-btn",onClick:y},{default:S((()=>[L(v,null,{default:S((()=>[o.value?(C(),A(I(r),{key:1})):(C(),A(I(c),{key:0}))])),_:1})])),_:1})]),j("div",dt,[L(z,{name:"fade",mode:"out-in"},{default:S((()=>[I(l).isLoading?(C(),w("div",ut,[L(x,{animated:"",count:1},{template:S((()=>[j("div",mt,[j("div",pt,[L(f,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),L(f,{variant:"text",style:{width:"80%"}})]),j("div",vt,[L(f,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),L(f,{variant:"text",style:{width:"70%"}})]),j("div",ht,[L(f,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),L(f,{variant:"text",style:{width:"85%"}})]),j("div",gt,[L(f,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),L(f,{variant:"text",style:{width:"75%"}})]),j("div",yt,[L(f,{variant:"circle",style:{width:"24px",height:"24px","margin-right":"8px"}}),L(f,{variant:"text",style:{width:"60%"}})])])])),_:1})])):0===s.value.length?(C(),w("div",ft,[L(v,{class:"empty-icon"},{default:S((()=>[L(I(u))])),_:1}),n[1]||(n[1]=j("p",null,"当前页面无目录",-1))])):(C(),w("ul",xt,[L(K,{name:"list",tag:"div",class:"toc-list-container"},{default:S((()=>[(C(!0),w(M,null,q(s.value,((t,e)=>(C(),w("li",{key:t.id,onClick:e=>function(t){const e=document.getElementById(t),a=document.querySelector(".main_content");if(e&&a){const i=e.offsetTop-a.offsetTop;a.scrollTo({top:i,behavior:"smooth"}),p.value=t}}(t.id),class:P({active:p.value===t.id})},[j("span",bt,B(e+1),1),j("span",kt,B(t.title),1)],10,_t)))),128))])),_:1})]))])),_:1})])])],2),[[J,g.value]]),X(j("div",{class:"toc-trigger",onClick:y},[j("div",Tt,[L(v,{class:"trigger-icon"},{default:S((()=>[L(I(m))])),_:1}),n[2]||(n[2]=j("span",{class:"trigger-text"},"目录",-1))])],512),[[J,g.value&&!o.value]])],64)}}},[["__scopeId","data-v-ce8079d1"]]),Ct={class:"manage_content"},It={class:"manage_body"},Lt=y({__name:"index",setup(t){const e=h(),a=p(),i=v();return k((()=>e.path),((t,n)=>{t!==n&&(i.main_loading=!0,D((()=>{a.addTab({path:e.path,meta:e.meta})})))}),{immediate:!0}),(t,e)=>(C(),w("div",Ct,[L(it),j("div",It,[L($),L(ot)]),L(wt)]))}},[["__scopeId","data-v-31cfcafa"]]);export{Lt as default};
